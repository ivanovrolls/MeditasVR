<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meditas App</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <script>
      // This is an example global variable, which all components can update
      AFRAME.registerComponent('button', {
        // Schema defines local variables for each component instance
        schema: {
          color: {default: '#003865'},
          checkoutColor: {default: '#006630'},
          clearColor:{default: '#B30C00'},
          hover: {default: '#005C8A'},
          click: {default: '#951272'},
          item_id: {default: '0'}
        },

        // The init function defines component behaviour
        init: function () {
          var data = this.data;
          var element = this.el;

          // Cursor enter callback - updates button colour to show it is targeted
          element.addEventListener('mouseenter', function () {
            element.setAttribute('color', data.hover);
          });

          // Cursor leave callback - resets button colour to its default value
          element.addEventListener('mouseleave', function () {
            if (data.item_id === '7') {
              // Reset to original color for buttons 7 and 8
              element.setAttribute('color', data.clearColor);
            } else  if (data.item_id === '8'){
              element.setAttribute('color', data.checkoutColor);
              
            } else {
              element.setAttribute('color', data.color);
            }
          });
          
          // Cursor click callback - updates button colour and updates a text label
          element.addEventListener('click', function () {
            ++click_count;
            
            element.setAttribute('color', data.click);
            
            // Select the label by its id, then update its text value
            document.querySelector('#text').setAttribute('value', 'Selected: Item ' + data.item_id);
          });
        }
      });
    </script>
    
    <a-scene>
          
    <a-assets>
      <a-mixin id="menu-item" geometry="width: 2; height: 1;" material="color: #3EB489" text="align: center; anchor: center; baseline: center; color: white; wrap-count: 15;"></a-mixin>
    </a-assets>
      
      <!-- Circle to represent the dot -->
<a-entity id="circle_meditation" position="-2.5 1 -3">
  <!-- Use a-ring to create a circular shape -->
  <a-ring
    radius-inner="0"
    radius-outer="1"
    height="0.05"
    color="lightblue"
    rotation="0 25 0"
    look-at="#camera">
  </a-ring>
  <!-- Text as a child component -->
  <a-entity position="0 0 0" rotation="0 25 0">
    <a-text value="Breathe in" align="center" color="white"></a-text>
  </a-entity>
</a-entity>
      
      <!-- Text to display the current state -->
      <a-plane mixin="menu-item" position="2 2 -5" text="value: Pause" rotation = "0 0 0" button="item_id: 1"></a-plane>
      <a-plane mixin="menu-item" position="4.5 2 -5" text="value: Square Breathing" rotation="0 -10 0" button="item_id: 2"></a-plane>
      <a-plane mixin="menu-item" position="2 0.5 -5" text="value: Resume" rotation = "0 0 0" button="item_id: 3"></a-plane>
      <a-plane mixin="menu-item" position="4.5 0.5 -5" text="value: Wim Hof" rotation = "0 -10 0" button="item_id: 4"></a-plane>
      <a-plane mixin="menu-item" geometry="width: 4; height: 1;" position="3 -1 -5" rotation = "0 0 0" text="value: Change Colour" button="item_id: 5"></a-plane>
    </a-scene>

    <script>
      // Function to switch the breathing technique
      function switchTechnique() {
        // Implement your logic to switch the technique
        document
          .getElementById("currentState")
          .setAttribute("value", "Wim Hof Breathing");
      }

      // Function to pause the meditation
      function pause() {
        // Implement your logic to pause the meditation
        document.getElementById("currentState").setAttribute("value", "Paused");
      }

      // Function to resume the meditation
      function resume() {
        // Implement your logic to resume the meditation
        document
          .getElementById("currentState")
          .setAttribute("value", "Square Breathing");
      }

      // Function to change the color of the dot
      function changeColor() {
        // Implement your logic to change the color
        let randomColor =
          "#" + Math.floor(Math.random() * 16777215).toString(16);
        document.getElementById("dot").setAttribute("color", randomColor);
      }
    </script>
  </body>
</html>
